{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
  <h3>D√©tails de la commande</h3>

  <p><strong>Date :</strong> {{ commande.date_commande|date:"d/m/Y H:i" }}</p>
  <p><strong>Adresse de livraison :</strong> {{ commande.adresse_livraison }}</p>
  <p><strong>Statut :</strong> {{ commande.statut }}</p>

  <h5>Plats command√©s :</h5>
  {% if commande.items.all %}
    <ul class="list-group">
      {% for item in commande.items.all %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ item.plat.nom }} (x{{ item.quantite }})
          <span>{{ item.plat.prix|floatformat:2 }} MAD</span>
        </li>
      {% endfor %}
    </ul>

    <a href="{% url 'commande_recu' commande.id %}" class="btn btn-outline-primary mt-3">
      üßæ Voir le re√ßu
    </a>

    {% if commande.statut == "en_cours" %}
      <form action="{% url 'terminer_livraison' commande.livraison.id %}" method="post" class="mt-3">
        {% csrf_token %}
        <button type="submit" class="btn btn-success">‚úÖ Marquer comme livr√©e</button>
      </form>
    {% endif %}
    
  {% else %}
    <p>Aucun plat dans cette commande.</p>
  {% endif %}
</div>
{% endblock %}
